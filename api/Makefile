.PHONY: run-dev init-db stop clean help

# Development server (Docker + Go)
run-dev:
	@echo "ğŸš€ Starting development environment..."
	@docker-compose -f ../docker-compose.yml up -d
	@echo "âœ… Development environment started!"
	@echo "ğŸ“ API server: http://localhost:8080"
	@echo "ğŸ“ Database: localhost:5432"

# Initialize database tables
init-db:
	@echo "ğŸ—„ï¸  Initializing database..."
	@go run cmd/initdb/main.go
	@echo "âœ… Database initialization completed!"

# Stop development environment
stop:
	@echo "ğŸ›‘ Stopping development environment..."
	@docker-compose -f ../docker-compose.yml down

# Clean up (remove containers and volumes)
clean:
	@echo "ğŸ§¹ Cleaning up..."
	@docker-compose -f ../docker-compose.yml down -v --remove-orphans

# Show help
help:
	@echo "Available commands:"
	@echo "  make run-dev  - Start Docker + Go development server"
	@echo "  make init-db  - Initialize database tables"
	@echo "  make stop     - Stop development environment"
	@echo "  make clean    - Stop and remove all containers/volumes"
	@echo "  make help     - Show this help message"